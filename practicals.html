<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Practicals</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css">

    <!-- Custom Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="font-awesome/css/font-awesome.min.css" type="text/css">

    <!-- Plugin CSS -->
    <link rel="stylesheet" href="../css/animate.min.css" type="text/css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/creative.css" type="text/css">

    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

</head>

<body id="page-top">

    <nav id="mainNav" class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand page-scroll" href="../index.html">Back to UvA Deep Learning Course</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a class="navbar-brand page-scroll" href="#page-top">Top</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#intro-to-torch">Intro to Torch</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#how-to-learn-with-neural-networks">How to learn with neural networks?</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#how-to-clasify-pixels">How to classify pixels?</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#how-to-synthesize-words">How to synthesize words?</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#unsupervised-bayesian-deep-learning">Unsupervised and Bayesian Deep Learning</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#the-bigger-picture">The bigger picture</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>

    <header>
        <div class="header-content">
            <div class="header-content-inner">
                <h1>PRACTICALS</h1>
                <hr>
                <p>UvA Deep Learning Course</p>
                <a href="#about" class="btn btn-primary btn-xl page-scroll">Find Out More</a>
            </div>
        </div>
    </header>

    <section class="bg-primary" id="about">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 text-center">
                    <h2 class="section-heading">About practicals</h2>
                    <hr class="light">
                    <p class="text-faded">TODO</p>
                    <a href="#" class="btn btn-default btn-xl">Get Started!</a>
                </div>
            </div>
        </div>
    </section>

    <section id="intro-to-torch">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 text-center">
                    <h2 class="section-heading">Practical 1: Intro to Torch</h2>
                    <hr class="primary">
                    
                    <p class="running-text" style="text-align:justify">

                    Before starting working on the assignment, please make sure you have read the <a href="lecture_notes.html#intro-to-torch"> introductory lecture notes</a> for Lua and Torch. Once you have read it, you are in good enough position to start completing the assignment.
                    Each assignment will contain several files that need to be completed/implemented.
                    The wrapper will be the Jypyter notebook in the folder with the extension ".ipynb", which serves only as a "glue" to connect everything together and let you run the code more easily.
                    In the notebook you will also get the description of the assignment, as presented here, and the questions you need to ask.

                    </p>

                    <h3 class="section-heading">Summary</h3>

                    <p class="running-text" style="text-align:justify">

                    By the end of this practical you should:

                    </p>

                    <p class="running-text">
                    <div align="left">
                    <ul class="running-text">
                    <li>be comfortable with Torch</li>
                    <li>be able to produce visualizations of functions in Torch</li>
                    <li>be able to use the optimization package in Torch to fit the parameters of a toy function to a given dataset</li>
                    </ul>
                    </div>
                    </p>

                    <h3 class="section-heading">Section 1 Master Torch and Lua</h3>

                    <p class="running-text" style="text-align:justify">

                    <b>Question 1.1</b> Define a 3x5 tensor containing row-wise the first 15 Fibbonaci numbers

                    </p>

                    <p class="running-text" style="text-align:justify">

                    <b>Question 1.2</b> Slice and print the tensor you defined to get different "sub-tensors" as in the the picture below. Please explain what is the difference between <tt>a[{{-1}, {}}]</tt> and <tt>a[{-1, {}}]</tt>.

                    <div align="middle">
                    <img src="images/matrix.png" class="img-responsive" alt="">
                    </div>

                    </p>

                    <p class="running-text" style="text-align:justify">

                    <b>Question 1.3</b> In question 1.1 you defined a 2-d tensor. First, vectorize it so that it is still a 2-d tensor only containing 15 rows and 1 column. Then, vectorize it so that it is a 1-d tensor containing 15 elements. Last, create a new tensor that for copies of that column, so that in the end you have a 15x4 tensor.

                    </p>

                    <p class="running-text" style="text-align:justify">

                    <i>Hint: For this question you can use the function torch.expand(.... Please explain what is the difference of this function from torch.repeatTensor(...).</i>

                    </p>

                    <p class="running-text" style="text-align:justify">

                    Fill in the third row and the second column with 1.5.

                    </p>

                    <h4 class="section-heading">Section 2 Basic implementations, visualizations and optimizations</h4>

                    <p class="running-text" style="text-align:justify">

                    Next, we will learn how to implement basic functions using Torch and Lua, find (local) minima using the optim package and visualizing the results. Let's assume we have the 1-d function

                    $$f(x)=x^2+\exp(|x|-x^2)$$

                    whose plot should look like (rendered with Wolfram Alpha):

                    <div align="middle">
                    <img src="images/function.gif" class="img-responsive" alt="">
                    </div>

                    </p>

                    <p class="running-text" style="text-align:justify">

                    $\DeclareMathOperator*{\argmin}{arg\; min}$
                    We want to find the location $x^*$, where $f(x)$ obtains its minimum value, i.e., $x^*=\argmin_{x} f(x)$.
                    To do this, we will be using the optimization package <i>optim</i> and more specifically going to optimize the function using the L-BFGS algorithm.
                    To find the minimum of the function $f(x)$ L-BFGS requires the gradient $\nabla_x f(x)$.

                    </p>

                    <p class="running-text" style="text-align:justify">

                    <b>Question 2.1</b> Implement and visualize function $f(x)$ in Torch, so that you obtain a similar plot.
                    </p>

                    <p class="running-text" style="text-align:justify">

                    <b>Question 2.2</b> Solve for the gradient $\nabla_x f(x)$.
                    In your report write down the gradient $\nabla_x f(x)$.
                    The gradient plot should look like:

                    <div align="middle">
                    <img src="images/gradient.gif">
                    </div>

                    </p>

                    <p class="running-text" style="text-align:justify">

                    <b>Question 2.3</b> Use this gradient with the <tt>feval</tt> function of the <tt>optim</tt> package, using the L-BFGS optimization algorithm setting and the default parameters to compute the minimum.

                    </p>

                    <p class="running-text" style="text-align:justify">

                    Note that since you want to find the minimum of the function, your optimization search will be for the point $x^*$ for which $f(x^*)\neq(x), \forall x$. Hence, your parameter <b>lies in</b> the input space <tt>x</tt>.

                    </p>

                    <h4 class="section-heading">Section 3 Fitting a function to data points</h4>

                    <p class="running-text" style="text-align:justify">

                    In question 2.1 you were asked to implement a function $f(x)$, its gradient $\nabla_x f(x)$, and compute the minimum of $f(x)$.
                    Now, let's assume that we are not given the function form, as in most cases in machine learning and applied statistics.
                    Instead, we are given a bunch of points in space and we want to fit a parameteric model, which explains it pretty well.
                    We are given the following point $(x, y)$ pairs.

                    <div align="middle">
                    <img src="images/points.png">
                    </div>

                    </p>

                    <p class="running-text" style="text-align:justify">

                    We can see that the way the points are positioned on the plot, it looks a lot like our function $f(x)$ from question 2.1.
                    However, it's only the shape that looks similar, the points are located somewhere else in space and they are even upside down.
                    This means we need to fit our function $f(x)$ to our particular point set.
                    To this end wee parameterize the components that control the shape and position of the function,

                    $$
                    f(x; \theta)=\theta_0 + \theta_1 x^2+ \theta_2 \exp(\theta_3 |x| - \theta_4 x^2).
                    $$

                    </p>

                    <p class="running-text" style="text-align:justify">

                    Note that compared to the previous section, where the parameters where the inputs $x$.
                    In this example, however, $x$ are the observed variables.
                    Our parameters, instead, are the varables $\theta$.
                    Our goal now is to find the the optimal parameters $\theta^*$ for which we could a render $\hat{f}(x)$ function that would look plausible, given these points.

                    </p>

                    <p class="running-text" style="text-align:justify">

                    <b>Question 3.1</b> We first need to define a good loss function, which is going to inform us how bad our rendered $\hat{f}(x)$ is from the actual values $y$. What could be a good cost function $\mathcal{L}(x, y)$?

                    </p>

                    <p class="running-text" style="text-align:justify">

                    <b>Question 3.2</b> Solve for the gradient $\nabla_\theta f(x)$. Write down the gradient $\nabla_\theta f(x)$.

                    </p>


                    <p class="running-text" style="text-align:justify">

                    <b>Question 3.3</b> Implement the gradient function $\nabla_\theta f(x)$.
                    Make sure your gradient outputs are correct.
                    To do so you can implement some unit tests, although this is not required by the assignment.
                    To implement a unit test, first define an input $x$.
                    From question 3.2 you know what the gradient function should return in theory for that particular input.
                    Compare what you should be getting in theory with what you get from your code.
                    If you find this difficult, you can break the function in smaller functions, like $f_1(x)=\theta_0+\theta_1 x^2$, $f_2(x)=\theta_2 \exp(x)$ and $f_3(x)=\theta_3 |x| - \theta_4 x^2$ and implement the gradients for these functions individually.

                    </p>

                    <p class="running-text" style="text-align:justify">

                    <i>Hint. For the implementations here check the math package in Torch. You probably gonna be needing functions like <tt>addcmul</tt>, <tt>mul</tt>, etc.</i>

                    </p>

                    <p class="running-text" style="text-align:justify">

                    <i>Hint 2. It's good here if you define <b>by default</b> all your variables to be local. It's alright if you mess it up, you will get a runtime error and you will not have access to a variable. Then, you just drop the keyword local. It's much worse if you forget to add the keyword local and your variable changes values because of other, external functions. The problem in that case is that you will not get a runtime error, you will just get crazy numbers and you will not know where the problem is exactly.</i>

                    </p>

                    <p class="running-text" style="text-align:justify">

                    <i>Hint 3. Make sure when you initialize your tensors, to set them to 0. Like in C/C++, Torch does not do that by default. If you don't do that, you might again get crazy numbers, especially if you use math functions like <tt>addcmul</tt>, that accumulate the output on an output variable that you must have defined earlier.</i>

                    </p>

                    <p class="running-text" style="text-align:justify">

                    <i>Note. In Torch (unfortunately) you cannot simply multiply a tensor with a number using a "*" operator. You need to use a specialized function like <tt>torch.mul(...)</tt> that multiplies all tensor entries with a specific number.</i>

                    </p>

                    <p class="running-text" style="text-align:justify">

                    <b>Question 3.4</b> Now that you have implemented the gradients correctly, it's time to find the optimal parameters $\theta^*$.
                    Use the <i>conjucate gradient(CG)</i> algorithm from the optim package to find the parameters $\theta$ that would fit $f(x; \theta)$ to the point set optimally.

                    </p>

                    <p class="running-text" style="text-align:justify">

                    Write down these parameters and plot the point set and the obtained function using the $\theta$ parameters.
                    Does the function make sense, namely does it fit well to the provided points?
                    Change the optimization function from <i>conjugate gradient</i> to <i>stochastic gradient descent (SGD)</i>.
                    Do you see any difference?
                    If yes, please explain why.

                    </p>


            </div>
        </div>
    </section>
    <section id="how-to-learn-with-neural-networks">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="section-heading">How to learn with neural networks?</h2>
                    <hr class="primary">

                    <p class="running-text">Not ready yet.</p>
                </div>
            </div>
        </div>
    </section>
    <section id="how-to-clasify-pixels">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="section-heading">How to classify pixels?</h2>
                    <hr class="primary">

                    <p class="running-text">Not ready yet.</p>
                </div>
            </div>
        </div>
    </section>
    <section id="how-to-synthesize-words">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="section-heading">How to synthesize words?</h2>
                    <hr class="primary">

                    <p class="running-text">Not ready yet.</p>
                </div>
            </div>
        </div>
    </section>
    <section id="all-things-unsupervised">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="section-heading">Unsupervised and Bayesian Deep Learning</h2>
                    <hr class="primary">

                    <p class="running-text">Not ready yet.</p>
                </div>
            </div>
        </div>
    </section>
    <section id="The bigger picture">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="section-heading">The bigger picture</h2>
                    <hr class="primary">

                    <p class="running-text">Not ready yet.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="js/jquery.easing.min.js"></script>
    <script src="js/jquery.fittext.js"></script>
    <script src="js/wow.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="js/creative.js"></script>

</body>

</html>
